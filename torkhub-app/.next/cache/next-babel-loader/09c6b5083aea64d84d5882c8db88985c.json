{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar _jsxFileName = \"/home/andhi/code/torkhub/torkhub-app/components/Messages.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Fragment, useEffect, useState } from \"react\";\nimport { ListGroup, ListGroupItem, Nav, NavItem, NavLink, Navbar } from \"reactstrap\";\nimport AnimatedIcon from \"./core/AnimatedIcon\";\nimport Arrow from \"../public/animated-icons/forward/forward.json\";\nimport Avatar from \"./core/Avatar\";\nimport Bookmark from \"../public/animated-icons/bookmark/bookmark.json\";\nimport Flag from \"../public/animated-icons/flag/flag.json\";\nimport Heart from \"../public/animated-icons/heart/heart.json\";\nimport Refresh from \"../public/animated-icons/restart/restart.json\";\nimport Sidebar from \"./core/Sidebar\";\nimport Star from \"../public/animated-icons/star/star.json\";\nimport distanceInWordsToNow from \"date-fns/distance_in_words_to_now\";\nimport fetch from \"../lib/fetch\";\nimport format from \"date-fns/format\";\nimport { useAppState } from \"./core/AppProvider\";\nimport useSWR from \"swr\";\n\nconst createMarkup = body => {\n  return {\n    __html: body\n  };\n};\n\nconst Messages = () => {\n  const [state] = useAppState();\n  const {\n    data,\n    error\n  } = useSWR(`${process.env.baseUrl}api/messages`, fetch);\n  const {\n    0: open,\n    1: setOpened\n  } = useState(true);\n  const {\n    0: selectedIndex,\n    1: setSelectedIndex\n  } = useState(0);\n  useEffect(() => {\n    setOpened(state.mobile ? false : true);\n  }, [state.mobile]);\n\n  const onSetSidebarOpen = open => {\n    setOpened(open);\n  };\n\n  const messageList = () => {\n    if (error) return __jsx(\"div\", {\n      className: \"d-flex align-items-center justify-content-center h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 23\n      }\n    }, \"Failed to load data\");\n    if (!data) return __jsx(\"div\", {\n      className: \"d-flex align-items-center justify-content-center h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }\n    }, \"Loading...\");\n    return data.map((message, index) => __jsx(ListGroupItem, {\n      tag: \"a\",\n      href: \"#\",\n      action: true,\n      flush: \"true\",\n      className: `${selectedIndex === index ? \"active-message border-bottom border-left-0 border-right-0\" : \"bg-transparent border-0\"} rounded-0 border-light py-4`,\n      onClick: e => {\n        e.preventDefault();\n        setSelectedIndex(index);\n      },\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: \"w-100 d-flex flex-row align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }, __jsx(\"span\", {\n      className: \"mr-3 position-relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    }, __jsx(Avatar, {\n      src: message.avatar ? message.avatar : \"\",\n      alt: message.from,\n      size: 48,\n      status: [\"danger\", \"success\", \"info\", \"warning\", \"secondary\"][Math.floor(Math.random() * 5)],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    })), __jsx(\"span\", {\n      className: \"w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }\n    }, __jsx(\"small\", {\n      className: \"d-flex w-100 text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }\n    }, __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 15\n      }\n    }, message.from), __jsx(\"span\", {\n      className: \"mr-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 15\n      }\n    }), __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }\n    }, distanceInWordsToNow(new Date(message.date)))), __jsx(\"span\", {\n      className: \"d-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, message.subject)))));\n  };\n\n  const messages = __jsx(\"div\", {\n    className: \"overflow-hidden d-flex h-100 flex-column flex-1 message-sidebar bg-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, __jsx(Navbar, {\n    className: \"bg-white\",\n    expand: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, __jsx(Nav, {\n    className: \"d-flex justify-content-between align-items-center w-100 text-center text-body\",\n    navbar: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, __jsx(NavItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, __jsx(NavLink, {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, __jsx(AnimatedIcon, {\n    animationData: Bookmark,\n    size: 18,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  }))), __jsx(NavItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, __jsx(NavLink, {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, __jsx(AnimatedIcon, {\n    animationData: Heart,\n    size: 18,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }))), __jsx(NavItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, __jsx(NavLink, {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, __jsx(AnimatedIcon, {\n    animationData: Star,\n    size: 18,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }))), __jsx(NavItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, __jsx(NavLink, {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, __jsx(AnimatedIcon, {\n    animationData: Refresh,\n    size: 18,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }))), __jsx(NavItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, __jsx(NavLink, {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, __jsx(AnimatedIcon, {\n    animationData: Flag,\n    size: 18,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }))))), __jsx(ListGroup, {\n    className: \"scroll-y flex-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, messageList()));\n\n  const sidebarProps = {\n    sidebar: messages,\n    width: 350,\n    open,\n    onSetOpen: onSetSidebarOpen,\n    isMobile: state.mobile,\n    rootClass: \"page-wrapper\",\n    sidebarClass: \"sidebar\",\n    contentClass: \"page-content\"\n  };\n  return __jsx(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 5\n    }\n  }, __jsx(Sidebar, _extends({}, sidebarProps, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }\n  }), __jsx(Message, {\n    id: selectedIndex,\n    toggleSidebar: () => setOpened(!open),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }\n  })));\n};\n\nconst Message = ({\n  id,\n  toggleSidebar\n}) => {\n  const {\n    data,\n    error\n  } = useSWR(`${process.env.baseUrl}api/messages?id=${id}`, fetch);\n  if (error) return __jsx(\"div\", {\n    className: \"d-flex align-items-center justify-content-center h-100\",\n    style: {\n      paddingTop: \"60px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 21\n    }\n  }, \"Failed to load data\");\n  if (!data) return __jsx(\"div\", {\n    className: \"d-flex align-items-center justify-content-center h-100\",\n    style: {\n      paddingTop: \"60px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }\n  }, \"Loading...\");\n  return __jsx(React.Fragment, null, __jsx(Navbar, {\n    className: \"bg-white d-lg-none\",\n    expand: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }\n  }, __jsx(Nav, {\n    className: \"d-flex justify-content-between align-items-center w-100 text-center text-body\",\n    navbar: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }, __jsx(NavItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 11\n    }\n  }, __jsx(NavLink, {\n    href: \"#\",\n    className: \"d-flex align-items-center p-0\",\n    onClick: toggleSidebar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }, __jsx(\"span\", {\n    className: \"d-inline-block\",\n    style: {\n      transform: \"rotate(180deg)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 15\n    }\n  }, __jsx(AnimatedIcon, {\n    animationData: Arrow,\n    size: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 17\n    }\n  })), __jsx(\"span\", {\n    className: \"d-inline-block px-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 15\n    }\n  }, \"More messages\"))))), __jsx(\"div\", {\n    className: \"p-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"px-5 py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"d-flex align-items-center mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }\n  }, __jsx(\"span\", {\n    className: \"mr-3 position-relative\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }, __jsx(Avatar, {\n    src: data.avatar ? data.avatar : \"\",\n    alt: data.from,\n    size: 64,\n    status: [\"danger\", \"success\", \"info\", \"warning\", \"secondary\"][Math.floor(Math.random() * 5)],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"pl-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 15\n    }\n  }, \" \", format(new Date(data.date), \"MMMM Do YYYY hh:mm\"), \" \"), __jsx(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 15\n    }\n  }, data.from))), __jsx(\"p\", {\n    className: \"lead my-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 11\n    }\n  }, data.subject), __jsx(\"div\", {\n    dangerouslySetInnerHTML: createMarkup(data.body),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default Messages;","map":{"version":3,"sources":["/home/andhi/code/torkhub/torkhub-app/components/Messages.js"],"names":["Fragment","useEffect","useState","ListGroup","ListGroupItem","Nav","NavItem","NavLink","Navbar","AnimatedIcon","Arrow","Avatar","Bookmark","Flag","Heart","Refresh","Sidebar","Star","distanceInWordsToNow","fetch","format","useAppState","useSWR","createMarkup","body","__html","Messages","state","data","error","process","env","baseUrl","open","setOpened","selectedIndex","setSelectedIndex","mobile","onSetSidebarOpen","messageList","map","message","index","e","preventDefault","avatar","from","Math","floor","random","Date","date","subject","messages","sidebarProps","sidebar","width","onSetOpen","isMobile","rootClass","sidebarClass","contentClass","Message","id","toggleSidebar","paddingTop","transform"],"mappings":"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","sourcesContent":["import { Fragment, useEffect, useState } from \"react\";\nimport {\n  ListGroup,\n  ListGroupItem,\n  Nav,\n  NavItem,\n  NavLink,\n  Navbar\n} from \"reactstrap\";\n\nimport AnimatedIcon from \"./core/AnimatedIcon\";\nimport Arrow from \"../public/animated-icons/forward/forward.json\";\nimport Avatar from \"./core/Avatar\";\nimport Bookmark from \"../public/animated-icons/bookmark/bookmark.json\";\nimport Flag from \"../public/animated-icons/flag/flag.json\";\nimport Heart from \"../public/animated-icons/heart/heart.json\";\nimport Refresh from \"../public/animated-icons/restart/restart.json\";\nimport Sidebar from \"./core/Sidebar\";\nimport Star from \"../public/animated-icons/star/star.json\";\nimport distanceInWordsToNow from \"date-fns/distance_in_words_to_now\";\nimport fetch from \"../lib/fetch\";\nimport format from \"date-fns/format\";\nimport { useAppState } from \"./core/AppProvider\";\nimport useSWR from \"swr\";\n\nconst createMarkup = body => {\n  return { __html: body };\n};\n\nconst Messages = () => {\n  const [state] = useAppState();\n  const { data, error } = useSWR(\n    `${process.env.baseUrl}api/messages`,\n    fetch\n  );\n  const [open, setOpened] = useState(true);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n\n  useEffect(() => {\n    setOpened(state.mobile ? false : true);\n  }, [state.mobile]);\n\n  const onSetSidebarOpen = open => {\n    setOpened(open);\n  };\n\n  const messageList = () => {\n    if (error) return <div className=\"d-flex align-items-center justify-content-center h-100\">Failed to load data</div>;\n    if (!data)\n      return (\n        <div className=\"d-flex align-items-center justify-content-center h-100\">\n          Loading...\n        </div>\n      );\n    return data.map((message, index) => (\n      <ListGroupItem\n        tag=\"a\"\n        href=\"#\"\n        action\n        flush=\"true\"\n        className={`${\n          selectedIndex === index\n            ? \"active-message border-bottom border-left-0 border-right-0\"\n            : \"bg-transparent border-0\"\n        } rounded-0 border-light py-4`}\n        onClick={e => {\n          e.preventDefault();\n          setSelectedIndex(index);\n        }}\n        key={index}\n      >\n        <div className=\"w-100 d-flex flex-row align-items-center\">\n          <span className=\"mr-3 position-relative\">\n            <Avatar\n              src={message.avatar ? message.avatar : \"\"}\n              alt={message.from}\n              size={48}\n              status={\n                [\"danger\", \"success\", \"info\", \"warning\", \"secondary\"][\n                  Math.floor(Math.random() * 5)\n                ]\n              }\n            />\n          </span>\n\n          <span className=\"w-100\">\n            <small className=\"d-flex w-100 text-muted\">\n              <span>{message.from}</span>\n              <span className=\"mr-auto\" />\n              <span>{distanceInWordsToNow(new Date(message.date))}</span>\n            </small>\n            <span className=\"d-block\">{message.subject}</span>\n          </span>\n        </div>\n      </ListGroupItem>\n    ));\n  };\n\n  const messages = (\n    <div className=\"overflow-hidden d-flex h-100 flex-column flex-1 message-sidebar bg-white\">\n      <Navbar className=\"bg-white\" expand={true}>\n        <Nav\n          className=\"d-flex justify-content-between align-items-center w-100 text-center text-body\"\n          navbar\n        >\n          <NavItem>\n            <NavLink href=\"#\">\n              <AnimatedIcon animationData={Bookmark} size={18} />\n            </NavLink>\n          </NavItem>\n          <NavItem>\n            <NavLink href=\"#\">\n              <AnimatedIcon animationData={Heart} size={18} />\n            </NavLink>\n          </NavItem>\n          <NavItem>\n            <NavLink href=\"#\">\n              <AnimatedIcon animationData={Star} size={18} />\n            </NavLink>\n          </NavItem>\n          <NavItem>\n            <NavLink href=\"#\">\n              <AnimatedIcon animationData={Refresh} size={18} />\n            </NavLink>\n          </NavItem>\n          <NavItem>\n            <NavLink href=\"#\">\n              <AnimatedIcon animationData={Flag} size={18} />\n            </NavLink>\n          </NavItem>\n        </Nav>\n      </Navbar>\n      <ListGroup className=\"scroll-y flex-1\">{messageList()}</ListGroup>\n    </div>\n  );\n\n  const sidebarProps = {\n    sidebar: messages,\n    width: 350,\n    open,\n    onSetOpen: onSetSidebarOpen,\n    isMobile: state.mobile,\n    rootClass: \"page-wrapper\",\n    sidebarClass: \"sidebar\",\n    contentClass: \"page-content\"\n  };\n\n  return (\n    <Fragment>\n      <Sidebar {...sidebarProps}>\n        <Message id={selectedIndex} toggleSidebar={() => setOpened(!open)} />\n      </Sidebar>\n    </Fragment>\n  );\n};\n\nconst Message = ({ id, toggleSidebar }) => {\n  const { data, error } = useSWR(\n    `${process.env.baseUrl}api/messages?id=${id}`,\n    fetch\n  );\n  if (error) return <div className=\"d-flex align-items-center justify-content-center h-100\"\n  style={{ paddingTop: \"60px\" }}>Failed to load data</div>;\n  if (!data)\n    return (\n      <div\n        className=\"d-flex align-items-center justify-content-center h-100\"\n        style={{ paddingTop: \"60px\" }}\n      >\n        Loading...\n      </div>\n    );\n\n  return (\n    <>\n      <Navbar className=\"bg-white d-lg-none\" expand={true}>\n        <Nav\n          className=\"d-flex justify-content-between align-items-center w-100 text-center text-body\"\n          navbar\n        >\n          <NavItem>\n            <NavLink\n              href=\"#\"\n              className=\"d-flex align-items-center p-0\"\n              onClick={toggleSidebar}\n            >\n              <span\n                className=\"d-inline-block\"\n                style={{ transform: \"rotate(180deg)\" }}\n              >\n                <AnimatedIcon animationData={Arrow} size={24} />\n              </span>\n              <span className=\"d-inline-block px-2\">More messages</span>\n            </NavLink>\n          </NavItem>\n        </Nav>\n      </Navbar>\n      <div className=\"p-5\">\n        <div className=\"px-5 py-3\">\n          <div className=\"d-flex align-items-center mb-3\">\n            <span className=\"mr-3 position-relative\">\n              <Avatar\n                src={data.avatar ? data.avatar : \"\"}\n                alt={data.from}\n                size={64}\n                status={\n                  [\"danger\", \"success\", \"info\", \"warning\", \"secondary\"][\n                    Math.floor(Math.random() * 5)\n                  ]\n                }\n              />\n            </span>\n            <div className=\"pl-3\">\n              <div className=\"date\">\n                {\" \"}\n                {format(new Date(data.date), \"MMMM Do YYYY hh:mm\")}{\" \"}\n              </div>\n              <h6>{data.from}</h6>\n            </div>\n          </div>\n          <p className=\"lead my-4\">{data.subject}</p>\n          <div dangerouslySetInnerHTML={createMarkup(data.body)} />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Messages;\n"]},"metadata":{},"sourceType":"module"}