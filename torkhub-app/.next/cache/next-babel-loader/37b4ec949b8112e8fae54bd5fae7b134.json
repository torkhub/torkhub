{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport MapGL, { Marker, NavigationControl, Popup } from \"react-map-gl\";\nimport CityInfo from \"../demos/map/city-info\";\nimport CityPin from \"../demos/map/city-pin\";\nimport Head from \"next/head\";\nimport fetch from \"../lib/fetch\";\nimport useSWR from \"swr\";\nimport { useState } from \"react\";\n\nconst MapMarkers = () => {\n  const {\n    data,\n    error\n  } = useSWR(`${process.env.baseUrl}api/cities`, fetch);\n  const {\n    0: viewport,\n    1: setViewport\n  } = useState({\n    latitude: 37.785164,\n    longitude: -100,\n    zoom: 3.5,\n    bearing: 0,\n    pitch: 0\n  });\n  const {\n    0: popupInfo,\n    1: setPopupInfo\n  } = useState(null);\n\n  const _updateViewport = viewport => {\n    setViewport(viewport);\n  };\n\n  const _renderCityMarker = (city, index) => {\n    return __jsx(Marker, {\n      key: `marker-${index}`,\n      longitude: city.longitude,\n      latitude: city.latitude\n    }, __jsx(CityPin, {\n      size: 20,\n      onClick: () => setPopupInfo(city)\n    }));\n  };\n\n  const _renderPopup = () => popupInfo && __jsx(Popup, {\n    tipSize: 5,\n    anchor: \"top\",\n    longitude: popupInfo.longitude,\n    latitude: popupInfo.latitude,\n    onClose: () => setPopupInfo(null)\n  }, __jsx(CityInfo, {\n    info: popupInfo\n  }));\n\n  if (error) return __jsx(\"div\", null, \"Failed to load media data\");\n  if (!data) return __jsx(\"div\", null, \"Loading...\");\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"link\", {\n    href: \"https://api.tiles.mapbox.com/mapbox-gl-js/v1.6.0/mapbox-gl.css\",\n    rel: \"stylesheet\"\n  })), __jsx(MapGL, _extends({}, viewport, {\n    width: \"100%\",\n    height: \"100%\",\n    mapStyle: \"mapbox://styles/mapbox/dark-v9\",\n    onViewportChange: _updateViewport,\n    mapboxApiAccessToken: process.env.mapBoxApi,\n    style: {\n      position: \"absolute\",\n      top: \"0px\",\n      left: \"0px\",\n      right: \"0px\",\n      bottom: \"0px\",\n      overflow: \"hidden\",\n      flex: \"1 1 auto\",\n      flexDirection: \"row\",\n      display: \"flex\"\n    }\n  }), data.map(_renderCityMarker), _renderPopup(), __jsx(NavigationControl, {\n    onViewportChange: _updateViewport\n  })));\n};\n\nexport default MapMarkers;","map":null,"metadata":{},"sourceType":"module"}